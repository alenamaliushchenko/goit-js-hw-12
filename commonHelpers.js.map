{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nfunction createImageCard ({webformatURL, largeImageURL, likes, views, comments, downloads}) {\n    return `\n        <div class=\"photo-card\">\n            <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${largeImageURL}\"  loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\">\n                    <b>Likes:</b><span class=\"info-item-value\">${likes}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Views:</b><span class=\"info-item-value\">${views}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Comments:</b><span class=\"info-item-value\">${comments}</span>\n                </p>\n                <p class=\"info-item\"> \n                    <b>Downloads:</b><span class=\"info-item-value\">${downloads}</span>\n                </p>\n            </div>\n        </div>\n    `;\n}\nfunction clearGallery (galleryElement){\n    galleryElement.innerHTML = '';\n}\nfunction renderGallery(galleryElement, images) {\n    const markup = images\n        .map(createImageCard)   \n        .join('');\n    galleryElement.insertAdjacentHTML('beforeend', markup);\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\nexport{ clearGallery, renderGallery, createImageCard };","import axios from 'axios';\nimport { refs } from '../main';\nasync function fetchImages(query, page, perPage) {\n    const apiKEY = '44883065-b38075931b52680ca8f625c61';\n    const url = `https://pixabay.com/api/?key=${apiKEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    const response = await axios.get(url);\n    return response.data;\n}\nfunction checkIfMoreImagesAvailable(totalHits, currentPage, perPage) {\n    const totalPages = Math.ceil(totalHits / perPage);\n    console.log(`Total Hits: ${totalHits}`);\n    console.log(`Current Page: ${currentPage}`);\n    console.log(`Per Page: ${perPage}`);\n    console.log(`Total Pages: ${totalPages}`);\n    if(currentPage >= totalPages) {\n        refs.loadMoreBtn.style.display = 'none';\n        iziToast.info({\n            title: 'Info',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            });\n    } else {\n        refs.loadMoreBtn.style.display = 'block';\n    } \n}\nfunction smoothScroll () {\n    const { height: cardHeight } = refs.imagesContainer.firstElementChild.getBoundingClientRect();\n    window.scrollBy ({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n}\nexport { checkIfMoreImagesAvailable, smoothScroll, fetchImages };\n","import { clearGallery, renderGallery } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { smoothScroll, checkIfMoreImagesAvailable, fetchImages } from \"./js/pixabay-api\";\n\nconst refs = {\n    searchForm: document.getElementById('searchForm'),\n    imagesContainer: document.getElementById('gallery'),\n    loaderContainer: document.querySelector('.loader-container'),\n    loader: document.querySelector('.loader'),\n    loadingMessage: document.querySelector('.loading-message'),\n    loadMoreBtn: document.getElementById('loadMoreBtn')\n};\nconst params = {\n    q: \"\",\n    page: 1,\n    per_page: 15,\n};\n\nrefs.searchForm.addEventListener(\"submit\", handleSearch);\nrefs.loadMoreBtn.addEventListener(\"click\", loadMoreImages);\n\nasync function handleSearch(event){\n    event.preventDefault();\n    clearGallery(refs.imagesContainer);\n    refs.loadMoreBtn.style.display = 'none';\n    params.page = 1;\n\n    const form = event.currentTarget;\n    params.q = form.elements.query.value.trim();\n    if (!params.q) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        }); \n        form.reset();\n        return;\n    }\n    showLoader();\n    try {\n        const data = await fetchImages(params.q, params.page, params.per_page);\n        hideLoader();\n        if (data.hits.length > 0) {\n            renderGallery(refs.imagesContainer, data.hits);\n            refs.loadMoreBtn.style.display = 'block';\n            checkIfMoreImagesAvailable(data.totalHits, params.page, params.per_page);\n        } else {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        }    \n    } catch (error) {\n        hideLoader();\n    }\n}\nasync function loadMoreImages(){\n    params.page += 1;\n    showLoader();\n    try {\n        const data = await fetchImages(params.q, params.page, params.per_page);\n        hideLoader();\n        renderGallery (refs.imagesContainer, data.hits);\n        checkIfMoreImagesAvailable (data.totalHits, params.page, params.per_page);\n        smoothScroll();\n    } catch (error) {\n        hideLoader();\n    }\n}\nfunction showLoader() {\n    refs.loader.classList.add('is-active');\n    refs.loadingMessage.classList.add('is-active');\n    refs.loaderContainer.style.display = 'block';\n}\nfunction hideLoader() {\n    refs.loader.classList.remove('is-active');\n    refs.loadingMessage.classList.remove('is-active');\n    refs.loaderContainer.style.display = 'none';\n}\nexport { refs };"],"names":["createImageCard","webformatURL","largeImageURL","likes","views","comments","downloads","clearGallery","galleryElement","renderGallery","images","markup","SimpleLightbox","fetchImages","query","page","perPage","url","axios","checkIfMoreImagesAvailable","totalHits","currentPage","totalPages","refs","smoothScroll","cardHeight","params","handleSearch","loadMoreImages","event","form","iziToast","showLoader","data","hideLoader"],"mappings":"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"}